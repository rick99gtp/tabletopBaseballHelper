<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="TableTop Baseball Helper">
  <meta name="author" content="Richard Beyer">
  <title>TableTop Baseball Helper | Welcome</title>
  <link rel="stylesheet" href="./css/main.css">

  <script>
    function getSelectedText(elementId) {
      let elt = document.getElementById(elementId);

      if (elt.selectedIndex == -1)
        return null;

      return elt.options[elt.selectedIndex].text;
    }

    function setMyObj() {
      let xmlhttp = new XMLHttpRequest();

      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          myObj = JSON.parse(this.responseText);

          setDay();
          getGames();
        }
      };

      let gamefile = getGameFile();

      xmlhttp.open("GET", gamefile, true);
      xmlhttp.send();
    }

    function getGameFile() {

      if (curSeason === "Regular") {
        // Regular Season Games
        switch (parseInt(newYear)) {
          case 2018:
            return "https://gist.githubusercontent.com/rick99gtp/bd4dee9b96a4404cafd091b3d84d9c45/raw/814b3e034a546917a43e1c5cade8df19294bed66/gl2018.txt";
          case 2017:
            return "https://gist.githubusercontent.com/rick99gtp/6a55f21b2d5afb14eefa56160f361e8b/raw/a6ab8ae368b9f91e03380bc59e1fceae212b7057/gl2017.txt";
          case 2016:
            return "https://gist.githubusercontent.com/rick99gtp/85c03eb2a3771d9e0eb7675a630e56fc/raw/999237d241a9f1da1f6589e7f1ac9b398758f766/gl2016.txt";
          case 2015:
            return "https://gist.githubusercontent.com/rick99gtp/3a924b52f8637c469419e80b37c75554/raw/d79ed3993c70785bdfaf2c46b3dc11afa71d858a/gl2015.txt";
          case 2014:
            return "https://gist.githubusercontent.com/rick99gtp/36a45c986e9c4100c9a306430f8cf6b7/raw/737a8bbe0bd340382ef3842ce17fed42f93f7fd9/gl2014.txt";
          case 2013:
            return "https://gist.githubusercontent.com/rick99gtp/2476887ba54cb315ffecf1a59a11d02c/raw/6d2d465ed5435ffb93ddf48988a7ea8fd905d04d/gl2013.txt";
          case 2012:
            return "https://gist.githubusercontent.com/rick99gtp/9ffea3e8fd2cf0e46f23d6e0c7e9b4a4/raw/61426351f895c723bcf7570b20b44c2423edf21b/gl2012.txt";
          case 2011:
            return "https://gist.githubusercontent.com/rick99gtp/3811036c5ec3f7fb63635a8a65811550/raw/f1fb396383a6e4fd6f77c6ac83fc95cc7de56c99/gl2011.txt";
          case 2010:
            return "https://gist.githubusercontent.com/rick99gtp/6d11d549cde5629fb151c908c641772b/raw/1b0c841cf33de8c1117c01d88d0e623b70282485/gl2010.txt";
          case 2009:
            return "https://gist.githubusercontent.com/rick99gtp/7ff306a6874e3b08599222df13e22ccf/raw/fa7b7e4e29d5c46941e29701a97c55fbb90977f6/gl2009.txt";
          case 2008:
            return "https://gist.githubusercontent.com/rick99gtp/f05f9425dbe31d613b842860a9fee40e/raw/b1549b608c7db0e8cbcab21d6f22e3a55ad2048b/gl2008.txt";
          case 2007:
            return "https://gist.githubusercontent.com/rick99gtp/800f374a34bf0dd6eba2bbf726b74334/raw/a77f405335cf3ab8e343d09b7a6b9de5ea15129d/gl2007.txt";
          case 2006:
            return "https://gist.githubusercontent.com/rick99gtp/be36acac66af4514fa0cb0b1826424e1/raw/f8a305a589e511c8fc5df4fadfd8d5636780f4fc/gl2006.txt";
          case 2005:
            return "https://gist.githubusercontent.com/rick99gtp/acfa45c2fe75947c2b57213b13041589/raw/1e767226d4d859518d859c8ada5e1b87c5807e00/gl2005.txt";
          case 2004:
            return "https://gist.githubusercontent.com/rick99gtp/84e081aec74a190d39094101cf4b5a77/raw/d8ae17773a7c95d8df816aea0683f974c8eb7e60/gl2004.txt";
          case 2003:
            return "https://gist.githubusercontent.com/rick99gtp/bb7d507e0385d6b8e762270b41de0fac/raw/046d7485b1c38d95bc44298cdffcea08d4833364/gl2003.txt";
          case 2002:
            return "https://gist.githubusercontent.com/rick99gtp/29f872f9704aee9addb207bad0b16b5e/raw/977f15f3b00c403f483be928dbb081ad4a757e3b/gl2002.txt";
          case 2001:
            return "https://gist.githubusercontent.com/rick99gtp/f27b3ed6112403de5246336c290a18d1/raw/ac5f9b0606d6cbb6d0630a64f1182b3b5b0e9909/gl2001.txt";
          case 2000:
            return "https://gist.githubusercontent.com/rick99gtp/334922d1e3730119028814d3e09374ed/raw/d78b18073fd68e2d7c29a84e1a841787dc0f7a19/gl2000.txt";
          case 1999:
            return "https://gist.githubusercontent.com/rick99gtp/2dbd3e87339546c518eaeaa3de123b3f/raw/755d5e5c232881a153311aab41574f048da45e23/gl1999.txt";
          case 1998:
            return "https://gist.githubusercontent.com/rick99gtp/5965870578c786292064025de49f0910/raw/63b6d1222ef0ecaaeefd586fa15c98d4d40cb251/gl1998.txt";
        }
      } else if (curSeason === "Playoffs") {
        if(curPlayoffs === "World Series") {
          return "https://gist.githubusercontent.com/rick99gtp/193c59d1c96ec8163e1b3a5cf42bbdfb/raw/0c58d0a3b783ea7459bdb1092537ce4b3a558a70/ws_file.txt";
        }
        else if(curPlayoffs === "Championship Series") {
          return "https://gist.githubusercontent.com/rick99gtp/b3750190b29ab0d3a16ed2fb0299471b/raw/c1c4a366abc9fc58fe0ae3bf43c6ae3b01038215/lc_file.txt";
        } else if(curPlayoffs === "Division Series") {
          return "https://gist.githubusercontent.com/rick99gtp/ffc079cc779e07b8d432885677df79c8/raw/ed7913c55d3b277735414c7aca46732f302226e7/ds_file.txt";
        } else if(curPlayoffs === "Wild Card Series") {
          return "https://gist.githubusercontent.com/rick99gtp/dfa206adb5d8c023c58b2000e4b2fd67/raw/2e2fd69f590d67a8e04ef56738270bd64c46b8bb/wc_file.txt";
        }
      } else {
        // All-Star Games
        return "https://gist.githubusercontent.com/rick99gtp/3122f12d2dba2a5ae30286b093e25f48/raw/b6cbfeb5d4014bf25a439d9061cf3bc83c0b1cf8/asgl";
      }
    }

    function getGames() {
      // look through obj and start pulling information
      let thisDayValue = document.getElementById("day").value;
      let thisDate = getCompleteDate(thisDayValue);
      let year = document.getElementById("year").value;

      let startDaySet = false;
      let startDay = 0;
      let endDay = 0;
      let teamSelected = 0 // 0 is ALL TEAMS

      //get the first record and the last record for this day
      for (let i = 0; i < myObj.gameday.length; i++) {
        if (myObj.gameday[i].date === thisDayValue) {
          // found the correct Day, put in
          if (startDaySet === false) {
            startDaySet = true;
            startDay = i;
          }
          endDay = i;
        }
      }

      // list games
      let addThisHtmlToAL = "";
      let addThisHtmlToNL = "";

      let alGames = 0;
      let nlGames = 0;

      for (let gameLoop = startDay; gameLoop < endDay + 1; gameLoop++) {

        // array to track runs per innings
        let vRunsPerInning = 0;
        let hRunsPerInning = 0;

        // get Team Names
        let visTeam = getTeamName(myObj.gameday[gameLoop].visteam);
        let homeTeam = getTeamName(myObj.gameday[gameLoop].hometeam);

        let visTeamColor = getTeamColor(myObj.gameday[gameLoop].visteam);
        let homeTeamColor = getTeamColor(myObj.gameday[gameLoop].hometeam);

        let visTeamFontColor = getTeamFontColor(myObj.gameday[gameLoop].visteam);
        let homeTeamFontColor = getTeamFontColor(myObj.gameday[gameLoop].hometeam);

        // get line scores
        let visLineScore = myObj.gameday[gameLoop].vislinescore;
        let homeLineScore = myObj.gameday[gameLoop].homelinescore;

        let vHits = myObj.gameday[gameLoop].vish;
        let hHits = myObj.gameday[gameLoop].homeh;

        let vErrors = myObj.gameday[gameLoop].vise;
        let hErrors = myObj.gameday[gameLoop].homee;

        let winningPitcherName = myObj.gameday[gameLoop].winningpitchername;
        let losingPitcherName = myObj.gameday[gameLoop].losingpitchername;
        let savingPitcherName = myObj.gameday[gameLoop].savingpitchername;

        if(typeof winningPitcherName === "undefined") {
          winningPitcherName = "(none)";
        }

        if(typeof losingPitcherName === "undefined") {
          losingPitcherName = "(none)";
        }

        if(typeof savingPitcherName === "undefined") {
          savingPitcherName = "(none)";
        }

        let vLine = ["", "", "", "", "", "", "", "", "", "", " ", " ", " "];
        let vCount = 0;

        let hLine = ["", "", "", "", "", "", "", "", "", "", " ", " ", " "];
        let hCount = 0;

        let vBatter = ["", "", "", "", "", "", "", "", ""];
        let hBatter = ["", "", "", "", "", "", "", "", ""];

        let vPos = ["", "", "", "", "", "", "", "", ""];
        let hPos = ["", "", "", "", "", "", "", "", ""];

        let vPitcher = "";
        let hPitcher = "";

        let visScore = 0;
        let homeScore = 0;

        // create visitor linescore array
        for (let i = 0; i < 13; i++) {
          // if next character in linescore is a '(' then a team has scored more than one digit of runs
          // need to get two characters
          if (visLineScore.substring(vCount, vCount + 1) !== "(") {
            // get one character
            vLine[i] = visLineScore.substring(vCount, vCount + 1);
            vCount += vLine[i].length;
          } else {
            // get two characters
            vLine[i] = visLineScore.substring(vCount + 1, vCount + 3);
            vCount += 4;
          }

          if (i < 9) {
            vRunsPerInning += parseInt(vLine[i]) || 0;
          }

        }

        // create home linescore array
        for (let i = 0; i < 13; i++) {
          // if next character in linescore is a '(' then a team has scored more than one digit of runs
          // need to get two characters
          if (homeLineScore.substring(hCount, hCount + 1) !== "(") {
            // get one character
            hLine[i] = homeLineScore.substring(hCount, hCount + 1);
            hCount += hLine[i].length;
          } else {
            // get two characters
            hLine[i] = homeLineScore.substring(hCount + 1, hCount + 3);
            hCount += 4;
          }

          if (i < 9) {
            hRunsPerInning += parseInt(hLine[i]) || 0;
          }
        }

        // visitor scored
        vScore = myObj.gameday[gameLoop].visscore;
        hScore = myObj.gameday[gameLoop].homescore;

        // get vBatters
        vBatter[0] = myObj.gameday[gameLoop].visplayername1;
        vBatter[1] = myObj.gameday[gameLoop].visplayername2;
        vBatter[2] = myObj.gameday[gameLoop].visplayername3;
        vBatter[3] = myObj.gameday[gameLoop].visplayername4;
        vBatter[4] = myObj.gameday[gameLoop].visplayername5;
        vBatter[5] = myObj.gameday[gameLoop].visplayername6;
        vBatter[6] = myObj.gameday[gameLoop].visplayername7;
        vBatter[7] = myObj.gameday[gameLoop].visplayername8;
        vBatter[8] = myObj.gameday[gameLoop].visplayername9;

        vPos[0] = getPos(myObj.gameday[gameLoop].visplayerposition1);
        vPos[1] = getPos(myObj.gameday[gameLoop].visplayerposition2);
        vPos[2] = getPos(myObj.gameday[gameLoop].visplayerposition3);
        vPos[3] = getPos(myObj.gameday[gameLoop].visplayerposition4);
        vPos[4] = getPos(myObj.gameday[gameLoop].visplayerposition5);
        vPos[5] = getPos(myObj.gameday[gameLoop].visplayerposition6);
        vPos[6] = getPos(myObj.gameday[gameLoop].visplayerposition7);
        vPos[7] = getPos(myObj.gameday[gameLoop].visplayerposition8);
        vPos[8] = getPos(myObj.gameday[gameLoop].visplayerposition9);

        vPitcher = myObj.gameday[gameLoop].vispitchername;

        hBatter[0] = myObj.gameday[gameLoop].homeplayername1;
        hBatter[1] = myObj.gameday[gameLoop].homeplayername2;
        hBatter[2] = myObj.gameday[gameLoop].homeplayername3;
        hBatter[3] = myObj.gameday[gameLoop].homeplayername4;
        hBatter[4] = myObj.gameday[gameLoop].homeplayername5;
        hBatter[5] = myObj.gameday[gameLoop].homeplayername6;
        hBatter[6] = myObj.gameday[gameLoop].homeplayername7;
        hBatter[7] = myObj.gameday[gameLoop].homeplayername8;
        hBatter[8] = myObj.gameday[gameLoop].homeplayername9;

        hPos[0] = getPos(myObj.gameday[gameLoop].homeplayerposition1);
        hPos[1] = getPos(myObj.gameday[gameLoop].homeplayerposition2);
        hPos[2] = getPos(myObj.gameday[gameLoop].homeplayerposition3);
        hPos[3] = getPos(myObj.gameday[gameLoop].homeplayerposition4);
        hPos[4] = getPos(myObj.gameday[gameLoop].homeplayerposition5);
        hPos[5] = getPos(myObj.gameday[gameLoop].homeplayerposition6);
        hPos[6] = getPos(myObj.gameday[gameLoop].homeplayerposition7);
        hPos[7] = getPos(myObj.gameday[gameLoop].homeplayerposition8);
        hPos[8] = getPos(myObj.gameday[gameLoop].homeplayerposition9);

        for (let x = 0; x < 9; x++) {
          vBatter[x] = vBatter[x].replace("'", "%27");
          hBatter[x] = hBatter[x].replace("'", "%27");
        }

        hPitcher = myObj.gameday[gameLoop].homepitchername;

        // get extra inning runs, if any
        let vExtraInningRuns = myObj.gameday[gameLoop].visscore - vRunsPerInning;

        let hExtraInningRuns = myObj.gameday[gameLoop].homescore - hRunsPerInning;

        // Show Box Score

        let homeLeague = myObj.gameday[gameLoop].homeleague;

        if (homeLeague.indexOf("AL") !== -1 || curSeason == "All-Star") {
          alGames++;

          addThisHtmlToAL +=
            "<a href='scoresheet.html?date=" + thisDate + "&year=" + year + "&vBatter1=" + vBatter[0] + "&vBatter2=" + vBatter[1] + "&vBatter3=" + vBatter[2] + "&vBatter4=" + vBatter[3] + "&vBatter5=" + vBatter[4] + "&vBatter6=" + vBatter[5] +
            "&vBatter7=" + vBatter[6] + "&vBatter8=" + vBatter[7] + "&vBatter9=" + vBatter[8] + "&hBatter1=" + hBatter[0] + "&hBatter2=" + hBatter[1] + "&hBatter3=" + hBatter[2] + "&hBatter4=" + hBatter[3] + "&hBatter5=" + hBatter[4] + "&hBatter6=" +
            hBatter[5] + "&hBatter7=" + hBatter[6] + "&hBatter8=" + hBatter[7] + "&hBatter9=" + hBatter[8] + "&vPitcher=" + vPitcher + "&hPitcher=" + hPitcher + "&vPos1=" + vPos[0] + "&vPos2=" + vPos[1] + "&vPos3=" + vPos[2] + "&vPos4=" + vPos[3] +
            "&vPos5=" + vPos[4] + "&vPos6=" + vPos[5] + "&vPos7=" + vPos[6] + "&vPos8=" + vPos[7] + "&vPos9=" + vPos[8] + "&hPos1=" + hPos[0] + "&hPos2=" + hPos[1] + "&hPos3=" + hPos[2] + "&hPos4=" + hPos[3] +
            "&hPos5=" + hPos[4] + "&hPos6=" + hPos[5] + "&hPos7=" + hPos[6] + "&hPos8=" + hPos[7] + "&hPos9=" + hPos[8] + "&visTeam=" + visTeam + "&homeTeam=" + homeTeam + "&vLine1=" + vLine[0] + "&vLine2=" + vLine[1] + "&vLine3=" + vLine[2] +
            "&vLine4=" + vLine[3] + "&vLine5=" + vLine[4] + "&vLine6=" + vLine[5] + "&vLine7=" + vLine[6] + "&vLine8=" + vLine[7] + "&vLine9=" + vLine[8] + "&vLine10=" + vLine[9] + "&vLine11=" + vLine[10] + "&vLine12=" + vLine[11] + "&hLine1=" +
            hLine[0] + "&hLine2=" + hLine[1] + "&hLine3=" + hLine[2] + "&hLine4=" + hLine[3] + "&hLine5=" + hLine[4] + "&hLine6=" + hLine[5] + "&hLine7=" + hLine[6] + "&hLine8=" + hLine[7] + "&hLine9=" + hLine[8] + "&hLine10=" + hLine[9] +
            "&hLine11=" + hLine[10] + "&hLine12=" + hLine[11] + "&vRuns=" + vScore + "&hRuns=" + hScore + "&vHits=" + vHits + "&hHits=" + hHits + "&vErrors=" + vErrors + "&hErrors=" + hErrors +
            "' target='_blank'><div class='game'><div class='card'><div id='teamnames'></div><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>X</div><div>R</div><div>H</div><div>E</div><div class='teamnames name-shadow' style='color:" +
            visTeamFontColor + "; background-image: radial-gradient(farthest-corner at 40px 40px," + visTeamColor + " 50%, transparent 100%);'>" +
            visTeam +
            "</div><div>" + vLine[0] + "</div><div>" + vLine[1] + "</div><div>" + vLine[2] + "</div><div>" + vLine[3] + "</div><div>" + vLine[4] + "</div><div>" + vLine[5] + "</div><div>" + vLine[6] + "</div><div>" + vLine[7] + "</div><div>" + vLine[
              8] + "</div><div>" + vExtraInningRuns + "</div><div>" + myObj.gameday[gameLoop].visscore + "</div><div>" + vHits + "</div><div>" + vErrors + "</div><div class='teamnames name-shadow' style='color:" + homeTeamFontColor +
            "; background-image: radial-gradient(farthest-corner at 40px 40px," + homeTeamColor + " 50%, transparent 100%);'>" + homeTeam + "</div><div>" + hLine[0] + "</div><div>" + hLine[
              1] +
            "</div><div>" + hLine[2] +
            "</div><div>" + hLine[3] + "</div><div>" + hLine[4] +
            "</div><div>" + hLine[5] + "</div><div>" + hLine[6] + "</div><div>" + hLine[7] + "</div><div>" + hLine[8] + "</div><div>" + hExtraInningRuns + "</div><div>" + myObj.gameday[gameLoop].homescore + "</div><div>" + hHits + "</div><div>" +
            hErrors + "</div></div><div class='pitcher-details'><strong>Winning Pitcher: </strong>" + winningPitcherName + "  <strong>Losing Pitcher: </strong>" + losingPitcherName + "  <strong>Save: </strong>" + savingPitcherName +
            "</div></div></a>";
        } else {
          nlGames++;

          addThisHtmlToNL +=
            "<a href='scoresheet.html?date=" + thisDate + "&year=" + year + "&vBatter1=" + vBatter[0] + "&vBatter2=" + vBatter[1] + "&vBatter3=" + vBatter[2] + "&vBatter4=" + vBatter[3] + "&vBatter5=" + vBatter[4] + "&vBatter6=" + vBatter[5] +
            "&vBatter7=" + vBatter[6] + "&vBatter8=" + vBatter[7] + "&vBatter9=" + vBatter[8] + "&hBatter1=" + hBatter[0] + "&hBatter2=" + hBatter[1] + "&hBatter3=" + hBatter[2] + "&hBatter4=" + hBatter[3] + "&hBatter5=" + hBatter[4] + "&hBatter6=" +
            hBatter[5] + "&hBatter7=" + hBatter[6] + "&hBatter8=" + hBatter[7] + "&hBatter9=" + hBatter[8] + "&vPitcher=" + vPitcher + "&hPitcher=" + hPitcher + "&vPos1=" + vPos[0] + "&vPos2=" + vPos[1] + "&vPos3=" + vPos[2] + "&vPos4=" + vPos[3] +
            "&vPos5=" + vPos[4] + "&vPos6=" + vPos[5] + "&vPos7=" + vPos[6] + "&vPos8=" + vPos[7] + "&vPos9=" + vPos[8] + "&hPos1=" + hPos[0] + "&hPos2=" + hPos[1] + "&hPos3=" + hPos[2] + "&hPos4=" + hPos[3] +
            "&hPos5=" + hPos[4] + "&hPos6=" + hPos[5] + "&hPos7=" + hPos[6] + "&hPos8=" + hPos[7] + "&hPos9=" + hPos[8] + "&visTeam=" + visTeam + "&homeTeam=" + homeTeam + "&vLine1=" + vLine[0] + "&vLine2=" + vLine[1] + "&vLine3=" + vLine[2] +
            "&vLine4=" + vLine[3] + "&vLine5=" + vLine[4] + "&vLine6=" + vLine[5] + "&vLine7=" + vLine[6] + "&vLine8=" + vLine[7] + "&vLine9=" + vLine[8] + "&hLine1=" + hLine[0] + "&hLine2=" + hLine[1] + "&hLine3=" + hLine[2] + "&hLine4=" + hLine[3] +
            "&hLine5=" + hLine[4] + "&hLine6=" + hLine[5] + "&hLine7=" + hLine[6] + "&hLine8=" + hLine[7] + "&hLine9=" + hLine[8] + "&vLine10=" + vLine[9] + "&vLine11=" + vLine[10] + "&vLine12=" + vLine[11] + "&hLine1=" + hLine[0] + "&hLine2=" +
            hLine[1] + "&hLine3=" + hLine[2] + "&hLine4=" + hLine[3] + "&hLine5=" + hLine[4] + "&hLine6=" + hLine[5] + "&hLine7=" + hLine[6] + "&hLine8=" + hLine[7] + "&hLine9=" + hLine[8] + "&hLine10=" + hLine[9] + "&hLine11=" + hLine[10] +
            "&hLine12=" + hLine[11] + "&vRuns=" + vScore + "&hRuns=" + hScore + "&vErrors=" + vErrors + "&hErrors=" + hErrors + "&vHits=" + vHits + "&hHits=" + hHits +
            "' target='_blank'><div class='game'><div class='card'><div id='teamnames'></div><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>X</div><div>R</div><div>H</div><div>E</div><div class='teamnames name-shadow' style='color:" +
            visTeamFontColor + "; background-image: radial-gradient(farthest-corner at 40px 40px," + visTeamColor + " 50%, transparent 100%);" + ";'>" +
            visTeam +
            "</div><div>" + vLine[0] + "</div><div>" + vLine[1] + "</div><div>" + vLine[2] + "</div><div>" + vLine[3] + "</div><div>" + vLine[4] + "</div><div>" + vLine[5] + "</div><div>" + vLine[6] + "</div><div>" + vLine[7] + "</div><div>" + vLine[
              8] + "</div><div>" + vExtraInningRuns + "</div><div>" + myObj.gameday[gameLoop].visscore + "</div><div>" + vHits + "</div><div>" + vErrors + "</div><div class='teamnames name-shadow' style='color:" + homeTeamFontColor +
            "; background-image: radial-gradient(farthest-corner at 40px 40px," + homeTeamColor + " 50%, transparent 100%);" + ";'>" + homeTeam + "</div><div>" + hLine[0] + "</div><div>" + hLine[
              1] +
            "</div><div>" + hLine[2] + "</div><div>" + hLine[3] + "</div><div>" + hLine[4] + "</div><div>" + hLine[5] + "</div><div>" + hLine[6] + "</div><div>" + hLine[7] + "</div><div>" + hLine[8] + "</div><div>" + hExtraInningRuns + "</div><div>" +
            myObj.gameday[gameLoop].homescore + "</div><div>" + hHits + "</div><div>" + hErrors + "</div></div><div class='pitcher-details'><strong>Winning Pitcher: </strong>" + winningPitcherName + "  <strong>Losing Pitcher: </strong>" +
            losingPitcherName + "  <strong>Save: </strong>" +
            savingPitcherName +
            "</div></div></a>";
        }

        //if (curSeason === "Regular") {
          document.getElementById('algames').innerHTML = "<div id='al'>American League</div>" + addThisHtmlToAL;
          document.getElementById('nlgames').innerHTML = "<div id='nl'>National League</div>" + addThisHtmlToNL;
        //} else {
          //document.getElementById('algames').innerHTML = "<div id='al'>American League</div>" + addThisHtmlToAL;
          //document.getElementById('nlgames').innerHTML = "<div id='nl'>National League</div>" + addThisHtmlToNL;
        //}

        if(alGames === 0) {
          document.getElementById('algames').innerHTML = "<div id='nl'>American League</div><div>No scheduled games.</div>";
        }

        if(nlGames === 0) {
          document.getElementById('nlgames').innerHTML = "<div id='nl'>National League</div><div>No scheduled games.</div>";
        }

      }

    }

    function getPos(pos) {
      let thisPos = ["", "P", "C", "1B", "2B", "3B", "SS", "LF", "CF", "RF", "DH"];

      return thisPos[parseInt(pos)];
    }

    function getTeamFontColor(teamName) {
      switch (teamName) {
        case "FLO":
        case "MIA":
          return "#000000";
        case "NYA":
          return "#000000";
        case "NYN":
          return "#002D72";
        case "OAK":
          return "#EFB21E";
        case "PIT":
          return "#000000";
        case "SFN":
          return "#000000";
        default:
          return "#FFFFFF";
      }
    }

    function getTeamColor(teamName) {
      switch (teamName) {
        case "NLS":
          return "#005A9C";
        case "ALS":
          return "#BA0021";
        case "ANA":
        case "LAA":
          return "#BA0021";
        case "ARI":
          return "#A71930";
        case "ATL":
          return "#CE1141";
        case "BAL":
          return "#DF4601";
        case "BOS":
          return "#BD3039";
        case "CHA":
          return "#000000";
        case "CHN":
          return "#CC3433";
        case "CIN":
          return "#C6011F";
        case "CLE":
          return "#E31937";
        case "COL":
          return "#333366";
        case "DET":
          return "#0C2C56";
        case "FLO":
          return "#FF6600";
        case "HOU":
          return "#EB6E1F";
        case "KCA":
          return "#004687";
        case "LAN":
          return "#005A9C";
        case "MIA":
          return "#FF6600";
        case "MIL":
          return "#0A2351";
        case "MIN":
          return "#002B5C";
        case "MON":
          return "#003087";
        case "NYA":
          return "#ffffff";
        case "NYN":
          return "#FF5910";
        case "OAK":
          return "#003831";
        case "PHI":
          return "#284898";
        case "PIT":
          return "#FDB827";
        case "SDN":
          return "#002D62";
        case "SEA":
          return "#005C5C";
        case "SFN":
          return "#FD5A1E";
        case "SLN":
          return "#C41E3A";
        case "TBA":
          return "#092C5C";
        case "TEX":
          return "#C0111F";
        case "TOR":
          return "#134A8E";
        case "WAS":
          return "#AB0003";
        default:
          return "Teamname?";
      }
    }

    function getTeamName(name) {
      switch (name) {
        case "NLS":
          return "NL All-Stars";
        case "ALS":
          return "AL All-Stars";
        case "ANA":
          if (curYear >= 2005) {
            return "Los Angeles (A)";
          } else {
            return "Anaheim";
          }
        case "ARI":
          return "Arizona";
        case "ATL":
          return "Atlanta";
        case "BAL":
          return "Baltimore";
        case "BOS":
          return "Boston";
        case "CHA":
          return "Chicago (A)";
        case "CHN":
          return "Chicago (N)";
        case "CIN":
          return "Cincinnati";
        case "CLE":
          return "Cleveland";
        case "COL":
          return "Colorado";
        case "DET":
          return "Detroit";
        case "FLO":
          return "Florida";
        case "HOU":
          return "Houston";
        case "KCA":
          return "Kansas City";
        case "LAA":
          return "Los Angeles (A)";
        case "LAN":
          return "Los Angeles (N)";
        case "MIA":
          return "Miami";
        case "MIL":
          return "Milwaukee";
        case "MIN":
          return "Minnesota";
        case "MON":
          return "Montreal";
        case "NYA":
          return "New York (A)";
        case "NYN":
          return "New York (N)";
        case "OAK":
          return "Oakland";
        case "PHI":
          return "Philadelphia";
        case "PIT":
          return "Pittsburgh";
        case "SDN":
          return "San Diego";
        case "SEA":
          return "Seattle";
        case "SFN":
          return "San Francisco";
        case "SLN":
          return "St. Louis";
        case "TBA":
          return "Tampa Bay";
        case "TEX":
          return "Texas";
        case "TOR":
          return "Toronto";
        case "WAS":
          return "Washington";
        default:
          return "Teamname?";
      }
    }

    function clearDayDropDownBox() {
      document.getElementById('day').options.length = 0;
    }

    function clearTeamDropDownBox() {
      document.getElementById('team').options.length = 0;
    }

    function getCompleteDate(oldDate) {
      let newMonths = ["", "", "March", "April", "May", "June", "July", "August", "September", "October"];

      let newMonth = parseInt(oldDate.substring(4, 6));
      let newDay = oldDate.substring(6, 8);
      let newYear = oldDate.substring(0, 4);

      return newMonths[newMonth - 1] + " " + newDay;
    }

    function setDay() {

      let oldDate = "";

      clearDayDropDownBox();

      let elt = document.getElementById('day');

      // parse complete date
      if (curSeason === "Regular") {
        document.getElementById("nlgames").style.display = "block";
        for (let i = 0; i < myObj.gameday.length; i++) {
          // get date and rearrange to a readable format for the dropdown box
          let newDate = getCompleteDate(myObj.gameday[i].date);

          if (newDate !== oldDate) {
            let el = document.createElement('option');
            el.textContent = newDate;
            el.value = myObj.gameday[i].date;
            elt.appendChild(el);

            oldDate = newDate;
          }

        }

      } else if (curSeason === "All-Star") {

        for (let i = 0; i < myObj.gameday.length; i++) {
          // get date and rearrange to a readable format for the dropdown box
          let newDate = myObj.gameday[i].date;

          newDate = parseInt(newDate.substring(0, 4));

          if (parseInt(newDate) === parseInt(newYear)) {
            newDate = getCompleteDate(myObj.gameday[i].date);
            let el = document.createElement("option");
            el.textContent = newDate;
            el.value = myObj.gameday[i].date;
            elt.appendChild(el);
          }

        }

        // hide the nlgames element
        document.getElementById("nlgames").style.display = "none";
      }
      else if(curSeason === "Playoffs") {
        document.getElementById("nlgames").style.display = "block";
        if(curPlayoffs === "World Series") {
          for (let i = 0; i < myObj.gameday.length; i++) {
            // get date and rearrange to a readable format for the dropdown box
            let newDate = myObj.gameday[i].date;

            newDate = parseInt(newDate.substring(0, 4));

            if (parseInt(newDate) === parseInt(newYear)) {
              newDate = getCompleteDate(myObj.gameday[i].date);
              let el = document.createElement("option");
              el.textContent = newDate;
              el.value = myObj.gameday[i].date;
              elt.appendChild(el);
            }

          }
        }
        else if(curPlayoffs === "Championship Series" || curPlayoffs === "Division Series" || curPlayoffs === "Wild Card Series") {
          let cs_oldDate = "";
          for (let i = 0; i < myObj.gameday.length; i++) {
            // get date and rearrange to a readable format for the dropdown box
            let newDate = myObj.gameday[i].date;

            newDate = parseInt(newDate.substring(0, 4));

            if (parseInt(newDate) === parseInt(newYear)) {
              newDate = getCompleteDate(myObj.gameday[i].date);
              if(newDate !== cs_oldDate) {
                let el = document.createElement("option");
                el.textContent = newDate;
                el.value = myObj.gameday[i].date;
                elt.appendChild(el);

                cs_oldDate = newDate;
              }

            }

          }
        }
      }
    }
  </script>
</head>

<!--HEADER-->

<body>
  <header>
    <div class="container">
      <div id="branding">
        <h1><span class="highlight">TableTop</span> Baseball Helper</h1>
      </div>
    </div>
  </header>

  <section id="thecontent">
    <div class="container">
      <div class="gamedate">
        <div class="select-area">
          <p class="p-inline">Year</p><select id="year" onchange="updatedYear()"></select>
        </div>
        <div class="select-area">
          <p class="p-inline">Day</p><select id="day" onchange="updatedDay()"></select>
        </div>
        <div class="select-area">
          <p class="p-inline">Season</p><select id="season" onchange="updatedSeason()">
            <option value='Regular'>Regular</option>
            <option value='Playoffs'>Playoffs</option>
            <option value='All-Star'>All-Star</option>
          </select>
        </div>
        <div id="playoff-div" class="select-area" style="display:none">
          <p class="p-inline">Playoffs</p><select id="playoffs" onchange="updatedPlayoffs()">
            <option value='World Series'>World Series</option>
            <option value='Championship Series'>Championship Series</option>
            <option value='Division Series'>Division Series</option>
            <option value='Wild Card Series'>Wild Card Series</option>
          </select>
        </div>
        <div id="buttons">
          <button id="prev-button" class="button" style="vertical-align:middle" onclick="changeDay(0)"><span>Prev Day</span></button>
          <button id="next-button" class="button" style="vertical-align:middle" onclick="changeDay(1)"><span>Next Day</span></button>
        </div>
      </div>
      <div class="box">
        <div id="algames">

        </div>
      </div>
      <div class="box">
        <div id="nlgames">

        </div>
      </div>
    </div>
  </section>

  <footer>
    <p>Copyright &copy; 2019 Top Prospect Baseball. All Rights Reserved.</p>
  </footer>

  <script>
    var myObj = {};
    var curYear = 2018;
    var curSeason = "Regular";
    var curTeam = "All Teams";
    var curPlayoffs = "World Series";
    var newYear = curYear;

    setYears();
    //setTeamNames();
    setMyObj();

    function updatedYear() {

      newYear = document.getElementById("year").value;

      //setTeamNames();
      setMyObj();

    }

    function setSelectedIndex(s, i) {
      s.options[i - 1].selected = true;
      return;
    }

    function changeDay(num) {
      if (num === 0) {
        let x = document.getElementById("day").selectedIndex;

        if (x > 0) {
          setSelectedIndex(document.getElementById("day"), x);
          getGames();
        }
      } else {
        let x = document.getElementById("day").selectedIndex;

        if (x < document.getElementById("day").length - 1) {
          setSelectedIndex(document.getElementById("day"), x + 2);
          getGames();
        }
      }
    }

    function sortSelect(selElem) {
      var tmpAry = new Array();
      for (var i = 0; i < selElem.options.length; i++) {
        tmpAry[i] = new Array();
        tmpAry[i][0] = selElem.options[i].text;
        tmpAry[i][1] = selElem.options[i].value;
      }
      tmpAry.sort();
      while (selElem.options.length > 0) {
        selElem.options[0] = null;
      }
      for (var i = 0; i < tmpAry.length; i++) {
        var op = new Option(tmpAry[i][0], tmpAry[i][1]);
        selElem.options[i] = op;
      }
      return;
    }

    function clearYears() {
      document.getElementById('year').options.length = 0;
    }

    function updatedDay() {
      getGames();
    }

    function updatedTeam() {
      curTeam = document.getElementById('Team').value;

      getGames();
    }

    function updatedPlayoffs() {
      curPlayoffs = document.getElementById("playoffs").value;
      let tempYear = document.getElementById('year');

      clearYears();
      setYears();

      selectItemByValue(tempYear, newYear);

      //clearTeamDropDownBox();
      //setTeamNames();
      setMyObj();
    }

    function updatedSeason() {
      curSeason = document.getElementById("season").value;
      let tempYear = document.getElementById('year');

      if(curSeason === "Playoffs") {
        // show the div with drop-down for playoffs (wild card, division, championship, world series)
        document.getElementById("playoff-div").style.display = "block";
      }
      else {
        document.getElementById("playoff-div").style.display = "none";
      }

      clearYears();
      setYears();

      selectItemByValue(tempYear, newYear);

      //clearTeamDropDownBox();
      //setTeamNames();
      setMyObj();

    }

    function setYears() {

      let options = "";
      let start = 0;

      if (curSeason === "All-Star") {
        start = 1933;

      } else if(curSeason === "Playoffs") {
        if(curPlayoffs === "World Series") {
          start = 1906;
        }
        else if(curPlayoffs === "Championship Series") {
          start = 1969;
        }
        else if(curPlayoffs === "Division Series") {
          start = 1981;
        }
        else if(curPlayoffs = "Wild Card Series") {
          start = 2012;
        }
      } else {
        start = 1906;
      }

      for (let year = curYear; year >= start; year--) {
        options += "<option value='" + year + "'>" + year + "</option>";
      }

      document.getElementById("year").innerHTML = options;

      if (newYear < start) {
        newYear = start;
        let number = document.getElementById('year');
        selectItemByValue(number, newYear);
      }

    }

    // Choose option in Select Element
    function selectItemByValue(elt, value) {

      for (var i = 0; i < elt.options.length; i++) {
        if (elt.options[i].value == value)
          elt.selectedIndex = i;
      }
    }

    function setTeamNames() {

      let teamName = document.getElementById("team");

      let options = "<option value='ALL'>All Teams</option>";

      if (curSeason !== "Regular") {
        teamName.innerHTML = "<option value='All Teams'>All Teams</option>";
        return;
      }

      // Arizona Diamondbacks

      if (newYear >= 1998) {
        options += "<option value='ARI'>Arizona Diamondbacks</option>";
      }

      // Atlanta Braves
      if (newYear <= 1906) {
        options += "<option value='BSN'>Boston Beaneaters</option>";
      } else if (newYear >= 1907 && newYear <= 1910) {
        options += "<option value='BSN'>Boston Doves</option>";
      } else if (newYear === 1911) {
        options += "<option value='BSN'>Boston Rustlers</option>";
      } else if (newYear >= 1912 && newYear <= 1935) {
        options += "<option value='BSN'>Boston Braves</option>";
      } else if (newYear >= 1936 && newYear <= 1940) {
        options += "<option value='BSN'>Boston Bees</option>";
      } else if (newYear >= 1941 && newYear <= 1952) {
        options += "<option value='BSN'>Boston Braves</option>";
      } else if (newYear >= 1953 && newYear <= 1965) {
        options += "<option value='MLN'>Milwaukee Braves</option>";
      } else if (newYear >= 1966) {
        options += "<option value='ATL'>Atlanta Braves</option>";
      }

      // Baltimore Orioles
      if (newYear >= 1906 && newYear <= 1953) {
        options += "<option value='SLA'>St. Louis Browns</option>";
      } else if (newYear >= 1954) {
        options += "<option value='BAL'>Baltimore Orioles</option>";
      }

      // Boston Red Sox
      if (newYear >= 1906 && newYear <= 1907) {
        options += "<option value='BOS'>Boston Americans</option>";
      } else if (newYear >= 1908) {
        options += "<option value='BOS'>Boston Red Sox</option>";
      }

      // Chicago Cubs
      if (newYear >= 1906) {
        options += "<option value='CHN'>Chicago Cubs</option>";
      }

      // Chicago White Sox
      if (newYear >= 1901) {
        options += "<option value='CHA'>Chicago White Sox</option>";
      }

      // Cincinnati Reds
      if (newYear >= 1906 && newYear <= 1953) {
        options += "<option value='CIN'>Cincinnati Reds</option>";
      } else if (newYear >= 1954 && newYear <= 1958) {
        options += "<option value='CIN'>Cincinnati Redlegs</option>";
      } else if (newYear >= 1959) {
        options += "<option value='CIN'>Cincinnati Reds</option>";
      }

      // Cleveland Indians
      if (newYear >= 1906 && newYear <= 1914) {
        options += "<option value='CLE'>Cleveland Naps</option>";
      } else if (newYear >= 1915) {
        options += "<option value='CLE'>Cleveland Indians</option>";
      }

      // Colorado Rockies
      if (newYear >= 1993) {
        options += "<option value='COL'>Colorado Rockies</option>";
      }

      // Detroit Tigers
      if (newYear >= 1906) {
        options += "<option value='DET'>Detroit Tigers</option>";
      }

      // Houston Astros
      if (newYear >= 1962 && newYear <= 1964) {
        options += "<option value='HOU'>Houston Colt .45&apos;s</option>";
      } else if (newYear >= 1965) {
        options += "<option value='HOU'>Houston Astros</option>";
      }

      // Kansas City Royals
      if (newYear >= 1969) {
        options += "<option value='KCA'>Kansas City Royals</option>";
      }

      // Los Angeles Angels
      if (newYear >= 1961 && newYear <= 1964) {
        options += "<option value='LAA'>Los Angeles Angels</option>";
      } else if (newYear >= 1965 && newYear <= 1996) {
        options += "<option value='CAL'>California Angels</option>";
      } else if (newYear >= 1997 && newYear <= 2004) {
        options += "<option value='ANA'>Anaheim Angels</option>";
      } else if (newYear >= 2005) {
        options += "<option value='ANA'>Los Angeles Angels</option>";
      }

      // Los Angeles Dodgers
      if (newYear >= 1906 && newYear <= 1910) {
        options += "<option value='BRO'>Brooklyn Superbas</option>";
      } else if (newYear >= 1911 && newYear <= 1912) {
        options += "<option value='BRO'>Brooklyn Dodgers</option>";
      } else if (newYear === 1913) {
        options += "<option value='BRO'>Brooklyn Superbas</option>";
      } else if (newYear >= 1914 && newYear <= 1931) {
        options += "<option value='BRO'>Brooklyn Robins</option>";
      } else if (newYear >= 1932 && newYear <= 1957) {
        options += "<option value='BRO'>Brooklyn Dodgers</option>";
      } else if (newYear >= 1958) {
        options += "<option value='LAN'>Los Angeles Dodgers</option>";
      }

      // Miami Marlins
      if (newYear >= 1993 && newYear <= 2011) {
        options += "<option value='FLO'>Florida Marlins</option>";
      } else if (newYear >= 2012) {
        options += "<option value='MIA'>Miami Marlins</option>";
      }

      // Milwaukee Brewers
      if (newYear === 1969) {
        options += "<option value='SEA'>Seattle Pilots</option>";
      } else if (newYear >= 1970) {
        options += "<option value='MIL'>Milwaukee Brewers</option>";
      }

      // Minnesota Twins
      if (newYear >= 1906 && newYear <= 1960) {
        options += "<option value='WAS'>Washington Senators</option>";
      } else if (newYear >= 1961) {
        options += "<option value='MIN'>Minnesota Twins</option>";
      }

      // New York Mets
      if (newYear >= 1962) {
        options += "<option value='NYN'>New York Mets</option>";
      }

      // New York Yankees
      if (newYear >= 1906 && newYear <= 1912) {
        options += "<option value='NYA'>New York Highlanders</option>";
      } else if (newYear >= 1913) {
        options += "<option value='NYA'>New York Yankees</option>";
      }

      // Oakland A's
      if (newYear >= 1906 && newYear <= 1954) {
        options += "<option value='PHA'>Philadelphia Athletics</option>";
      } else if (newYear >= 1955 && newYear <= 1967) {
        options += "<option value='KCA'>Kansas City Athletics</option>";
      } else if (newYear >= 1968) {
        options += "<option value='OAK'>Oakland Athletics</option>";
      }

      // Philadelphia Phillies
      if (newYear >= 1906) {
        options += "<option value='PHI'>Philadelphia Phillies</option>";
      }

      // Pittsburg Pirates
      if (newYear >= 1906) {
        options += "<option value='PIT'>Pittsburgh Pirates</option>";
      }

      // San Diego Padres
      if (newYear >= 1969) {
        options += "<option value='SDN'>San Diego Padres</option>";
      }

      // San Francisco Giants
      if (newYear >= 1906 && newYear <= 1957) {
        options += "<option value='NYN'>New York Giants</option>";
      } else if (newYear >= 1958) {
        options += "<option value='SFN'>San Francisco Giants</option>";
      }

      // Seattle Mariners
      if (newYear >= 1977) {
        options += "<option value='SEA'>Seattle Mariners</option>";
      }

      // St. Louis Cardinals
      if (newYear >= 1906) {
        options += "<option value='SLN'>St. Louis Cardinals</option>";
      }

      // Tampa Bay Rays
      if (newYear >= 1998 && newYear <= 2007) {
        options += "<option value='TBA'>Tampa Bay Devil Rays</option>";
      } else if (newYear >= 2008) {
        options += "<option value='TBA'>Tampa Bay Rays</option>";
      }

      // Texas Rangers
      if (newYear >= 1961 && newYear <= 1971) {
        options += "<option value='WS2'>Washington Senators</option>";
      } else if (newYear >= 1972) {
        options += "<option value='TEX'>Texas Rangers</option>";
      }

      // Toronto Blue Jays
      if (newYear >= 1977) {
        options += "<option value='TOR'>Toronto Blue Jays</option>";
      }

      // Washington Nationals
      if (newYear >= 1969 && newYear <= 2004) {
        options += "<option value='MON'>Montreal Expos</option>";
      } else if (newYear >= 2005) {
        options += "<option value='WAS'>Washington Nationals</option>";
      }

      teamName.innerHTML = options;

      sortSelect(teamName);

    }
  </script>
</body>

</html>
